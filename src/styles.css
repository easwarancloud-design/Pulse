:root {
  --bg: #0b0f14; /* page background dark */
  --sidebar: linear-gradient(180deg,#07101a,#0b1722); /* left sidebar */
  --panel: linear-gradient(180deg,#041424,#071428); /* right panel bg */
  --card: rgba(255,255,255,0.03);
  --sidebar-surface: linear-gradient(180deg,#ffffff,#fbfdff);
  --sidebar-card: #f6f9fc;
  --sidebar-divider: rgba(2,6,23,0.04);
  --sidebar-text: oklch(0.4658 0.1562 255.5 / 1);
  --sidebar-muted: #6b7280;
  /* primary body text color (OKLCH with hex fallback) */
  --text: oklch(.3908 .128 256 / 1); /* desired text color */
  --text-fallback: #102033;
  --muted: #9aa8bb;
  --accent: #2dd4bf;
  --bubble-user: linear-gradient(180deg,#0ea5e9,#0369a1);
  --bubble-bot: rgba(255,255,255,0.03);
}

/* Global override: set chat panel to a near-white surface (not pure white) */
.chat-window {
  background: #f9f9f9 !important;
  box-shadow: none !important;
}


[data-theme='light'] {
  --bg: #ffffff;
  /* clean white sidebar surface to match original */
  --sidebar: #ffffff;
  --panel: #ffffff;
  /* subtle card surface on light theme */
  --card: rgba(0,0,0,0.02);
  --text: #333333; /* standard dark gray for body text */
  --muted: #666666; /* medium gray for captions */
  --accent: #007acc; /* blue accent to match original */
  --bubble-user: linear-gradient(180deg,#007acc,#005a99);
  --bubble-bot: rgba(0,0,0,0.02);
}

* { box-sizing: border-box; }
.html, body, #root { height: 100%; margin: 0; background: var(--bg) !important; }
body { overflow: hidden; color: var(--text, var(--text-fallback)); }
.app, .app-root { height: 100vh; min-height: 100vh; display: flex; background: var(--bg) !important; }

.sidebar { flex: 0 0 340px !important; height: 100vh !important; min-height: 0; overflow: visible !important; display: flex !important; flex-direction: column !important; }
.sidebar-top { display:flex; flex-direction:column; align-items:flex-start; gap:6px; padding-bottom:6px }
.sidebar-brand { display:flex; align-items:center; justify-content:flex-start }
.brand-left { display:flex; align-items:center; gap:8px }
.pulse-icon { width:32px; height:32px; display:flex; align-items:center; justify-content:center; background:linear-gradient(90deg,var(--accent),#60a5fa); border-radius:8px; color:white; box-shadow:0 6px 18px rgba(45,212,191,0.08); margin-left:0 }
.brand-title { font-weight:800; font-size:16px; letter-spacing:0.2px; margin-left:4px }

/* collapsed (icons-only) sidebar - hide text in light mode */
[data-theme='light'] .sidebar.collapsed .brand-title,
[data-theme='light'] .sidebar.collapsed .back-text,
[data-theme='light'] .sidebar.collapsed .theme-text,
[data-theme='light'] .sidebar.collapsed .chat-snippet,
[data-theme='light'] .sidebar.collapsed .agents-title,
[data-theme='light'] .sidebar.collapsed .agent-list,
[data-theme='light'] .sidebar.collapsed .scrollable-area,
[data-theme='light'] .sidebar.collapsed .sidebar-search,
[data-theme='light'] .sidebar.collapsed .chat-history,
[data-theme='light'] .sidebar.collapsed .chat-list,
[data-theme='light'] .sidebar.collapsed .agents,
[data-theme='light'] .sidebar.collapsed .brand-text,
[data-theme='light'] .sidebar.collapsed .back-btn .back-text {
  display: none !important;
}

/* Light mode collapsed icons - same color */
[data-theme='light'] .sidebar.collapsed .icon-only,
[data-theme='light'] .sidebar.collapsed .back-btn,
[data-theme='light'] .sidebar.collapsed .expand-btn {
  color: #333333 !important;
  background: transparent !important;
  border: none !important;
}

/* Ensure brand text is hidden in collapsed mode for both themes */
.sidebar.collapsed .brand-text,
.sidebar.collapsed .back-text {
  display: none !important;
}

/* Make sure collapse behavior works consistently */
.sidebar.collapsed { 
  width: 56px !important; 
  flex: 0 0 56px !important; 
  overflow: visible !important;
}
.sidebar.collapsed .pulse-icon { width:36px; height:36px; margin:6px auto }
.sidebar.collapsed .chat-item { padding:0; display:flex; align-items:center; justify-content:center }
.sidebar.collapsed .chat-item .chat-title { display:none }
.sidebar.collapsed .scrollable-area { padding-right:2px }
.sidebar.collapsed .sidebar-bottom { padding:0 }

/* layout for the small vertical toolbar that shows the 3 icons when collapsed */
.collapsed-toolbar { display:flex; flex-direction:column; gap:10px; padding:8px 6px; align-items:center; width:100% }
.collapsed-toolbar .icon-only { width:40px; height:40px; border-radius:10px; border:0; background:transparent; color:var(--muted); display:flex; align-items:center; justify-content:center; cursor:pointer }
.collapsed-toolbar .icon-only:hover { background: rgba(255,255,255,0.03); color:var(--text) }

/* Dark mode specific styles for collapsed toolbar icons */
:not([data-theme='light']) .collapsed-toolbar .icon-only {
  color: #9ca3af !important;
}

:not([data-theme='light']) .collapsed-toolbar .icon-only:hover {
  background: rgba(255,255,255,0.1) !important;
  color: #ffffff !important;
}

/* Ensure collapsed toolbar only shows the 3 required icons in dark mode */
:not([data-theme='light']) .sidebar.collapsed .collapsed-toolbar {
  display: flex !important;
}

:not([data-theme='light']) .sidebar.collapsed .collapsed-toolbar .icon-only {
  display: flex !important;
}

/* Hide all other content when collapsed in dark mode */
:not([data-theme='light']) .sidebar.collapsed .brand-row,
:not([data-theme='light']) .sidebar.collapsed .sidebar-search,
:not([data-theme='light']) .sidebar.collapsed .scrollable-area,
:not([data-theme='light']) .sidebar.collapsed .sidebar-bottom,
:not([data-theme='light']) .sidebar.collapsed .chat-history,
:not([data-theme='light']) .sidebar.collapsed .agents,
:not([data-theme='light']) .sidebar.collapsed .history-header,
:not([data-theme='light']) .sidebar.collapsed .agent-list,
:not([data-theme='light']) .sidebar.collapsed .agent-item {
  display: none !important;
}

/* Ensure only collapsed toolbar is visible in dark mode when collapsed */
:not([data-theme='light']) .sidebar.collapsed {
  overflow: hidden !important;
}

:not([data-theme='light']) .sidebar.collapsed .sidebar-top {
  height: auto !important;
}

/* Make sure collapsed toolbar icons are properly spaced and visible */
:not([data-theme='light']) .collapsed-toolbar {
  padding: 12px 6px !important;
  gap: 12px !important;
}

/* Additional rules to ensure clean collapsed state in dark mode */
:not([data-theme='light']) .sidebar.collapsed > * {
  display: none !important;
}

:not([data-theme='light']) .sidebar.collapsed .sidebar-top {
  display: flex !important;
}

:not([data-theme='light']) .sidebar.collapsed .collapsed-toolbar {
  display: flex !important;
}

:not([data-theme='light']) .sidebar.collapsed .collapsed-toolbar * {
  display: flex !important;
}

/* Hide back text in dark mode collapsed state - show only icon */
:not([data-theme='light']) .sidebar.collapsed .collapsed-toolbar .back-btn .back-text {
  display: none !important;
}

/* when collapsed, render New Chat as a circular floating button along the left edge */
.sidebar.collapsed .sidebar-bottom { display: none !important }
.sidebar.collapsed .new-chat.bottom { display:none !important }

/* ensure collapsed toolbar stays visually separated from page */
.sidebar.collapsed { box-shadow: 2px 0 8px rgba(2,6,23,0.06) }

/* Expanded sidebar (light surface) to match reference image */
.not-light-theme .sidebar:not(.collapsed), :not([data-theme='light']) .sidebar:not(.collapsed) {
  background: var(--sidebar-surface) !important;
  border-right: 1px solid var(--sidebar-divider) !important;
  color: var(--sidebar-text) !important;
  box-shadow: inset -8px 0 20px rgba(2,6,23,0.02) !important;
}

.sidebar:not(.collapsed) .pulse-icon { background: linear-gradient(90deg,#60a5fa,#34d399); box-shadow:none; }
.sidebar:not(.collapsed) .brand-title { color:var(--accent); font-size:16px; margin-left:8px }
.sidebar:not(.collapsed) .back-with-text { color:#374151 }
.sidebar:not(.collapsed) .back-with-text:hover { background: transparent }

/* Search box style on expanded light sidebar */
.sidebar:not(.collapsed) .search-inner { background: var(--sidebar-card); padding:10px 12px; border-radius:10px; border:1px solid rgba(30,115,232,0.06); height:40px; display:flex; align-items:center }
.sidebar:not(.collapsed) .search-inner:focus-within { border-color: rgba(30,115,232,0.10); }
.sidebar:not(.collapsed) .sidebar-search input { background:transparent; color:var(--sidebar-text); font-size:14px }

/* thin separator lines under search and agents to match reference */
.sidebar:not(.collapsed) .sidebar-search { border-bottom: 1px solid rgba(2,6,23,0.06); padding-bottom:10px }
.sidebar:not(.collapsed) .agents { border-bottom: 1px solid rgba(2,6,23,0.06); padding-bottom:12px }

/* Agents list: light cards */
.sidebar:not(.collapsed) .agent-item { background: transparent; color:var(--sidebar-text); box-shadow:none; padding:8px 10px; border-radius:10px; display:flex; align-items:center; gap:10px }
.sidebar:not(.collapsed) .agent-item span { color:var(--accent); font-weight:500 }
.sidebar:not(.collapsed) .agent-icon { color: var(--accent); background: transparent; width:28px; height:28px; display:inline-flex; align-items:center; justify-content:center; border-radius:50%; font-size:14px }

/* Section headings and snippets */
.sidebar:not(.collapsed) .agents-title, .sidebar:not(.collapsed) .time-category h3 { color:var(--sidebar-muted); font-weight:600 }
.sidebar:not(.collapsed) .chat-item .chat-title { color:var(--sidebar-text) }
.sidebar:not(.collapsed) .chat-item .chat-snippet { color:var(--sidebar-muted) }

/* chat-history card separation and subtle dividers */
.sidebar:not(.collapsed) .chat-history .time-category { padding:10px 0; border-bottom:1px solid var(--sidebar-divider) }

/* New chat full-width blue button in expanded mode */
.sidebar:not(.collapsed) .sidebar-bottom { position: sticky; bottom: 8px; padding:10px 0; }
.sidebar:not(.collapsed) .new-chat.bottom { background: linear-gradient(90deg,#2563eb,var(--accent)); color:#fff; padding:10px 14px; border-radius:10px; width:100%; text-align:center; font-weight:700; box-shadow:0 8px 24px rgba(37,99,235,0.08) }

/* ensure icons contrast on light surface */
.sidebar:not(.collapsed) .menu-btn, .sidebar:not(.collapsed) .icon-only { color:#374151 }

/* Slightly increase spacing to mirror reference layout */
.sidebar:not(.collapsed) .brand-row { padding:8px 6px }
.brand-row { display:flex; align-items:center; justify-content:space-between; gap:8px; width:100%; flex-wrap:nowrap }
.brand-row .left { display:flex; align-items:center; gap:8px; flex:0 0 auto }
.brand-row .brand { flex: 0 1 auto; min-width:0 }
.brand-row .top-actions { display:flex; align-items:center; gap:8px; flex:0 0 auto; white-space:nowrap }

/* New layout helpers for centered brand with left/right controls */
.brand-row { position:relative; padding:6px 4px }
.brand-row .left-row { flex: 0 0 auto }
.brand-row .brand-center { position:absolute; left:50%; transform:translateX(-50%); pointer-events:none }
.brand-row .brand-center .brand { pointer-events:auto }
.brand-row .right-row { flex: 0 0 auto }

/* Two-row header layout */
.brand-row .top-row, .brand-row .second-row { display:flex; align-items:center; justify-content:space-between; gap:8px; padding:4px 6px }
.brand-row .top-row .brand-left { display:flex; align-items:center; gap:8px }
.brand-row .top-row .top-right { display:flex; align-items:center }
.brand-row .second-row .back-left { display:flex; align-items:center }
.brand-row .second-row .second-right { display:flex; align-items:center }

/* Slightly reduce brand text weight on small screens */
@media (max-width: 420px) {
  .brand-text { font-size:14px }
  .back-text { display:none }
}

/* Strong override: ensure the brand-row actually stacks into two rows and the
   controls align to left/right as intended. This addresses cases where other
   rules collapsed them into a single line. */
html .sidebar .brand-row {
  display: flex !important;
  flex-direction: column !important;
  align-items: stretch !important;
  gap: 4px !important;
  padding: 6px 8px !important;
}
html .sidebar .brand-row .top-row,
html .sidebar .brand-row .second-row {
  display: flex !important;
  flex-direction: row !important;
  align-items: center !important;
  justify-content: space-between !important;
  width: 100% !important;
}

/* ensure the collapse button is aligned to the right in the top row */
html .sidebar .brand-row .top-row .top-right { margin-left: auto !important }

/* Ensure the back icon SVG uses currentColor and is visible in light/dark */
html .sidebar .back-btn,
html .sidebar .back-btn svg { color: var(--sidebar-muted) !important; stroke: currentColor !important; fill: none !important }
html .sidebar .back-btn svg { width: 18px !important; height: 18px !important }


.back-btn { display:inline-flex; align-items:center; gap:8px; color:var(--sidebar-muted); background:transparent; border:0; padding:6px; border-radius:8px }
.back-btn .back-text { display:inline-block; color:var(--sidebar-muted); font-weight:600 }

/* Back button theme overrides */
.back-btn.light svg, .back-btn.light { color: #05243A !important; }
.back-btn.dark svg, .back-btn.dark { color: #ffffff !important; }

/* Ensure Pulse icon is visible in light mode (use currentColor in IconPulse) */
html[data-theme='light'] .brand .pulse-icon svg { color: #05243A !important; stroke: currentColor !important }

/* Disabled New chat button */
.new-chat.bottom.disabled { opacity: 0.5; pointer-events: none; cursor: default }

/* Auto-resize textarea base styles - hide scrollbar initially */
.input-wrapper textarea { 
  width: 100%; 
  resize: none; 
  min-height: 36px; 
  max-height: 400px; 
  overflow: hidden; /* Hide scrollbar initially */
  padding: 10px 12px; 
  border-radius: 10px; 
  border: none !important; 
  background: transparent;
  line-height: 1.5;
  box-shadow: none !important;
  outline: none !important;
}

/* Show scrollbar only when content exceeds one line */
.input-wrapper textarea:focus,
.input-wrapper textarea.has-content {
  overflow-y: auto;
}

.input-wrapper textarea:focus { 
  outline: none !important; 
  box-shadow: none !important;
  border: none !important;
}

/* Hide scrollbar for input elements in chat window */
.input-wrapper input,
.input-wrapper textarea {
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE 10+ */
}

.input-wrapper input::-webkit-scrollbar,
.input-wrapper textarea::-webkit-scrollbar {
  width: 0;
  height: 0;
}

.brand { display:flex; align-items:center; gap:8px }
.brand .brand-text { font-weight:800; font-size:18px; color:var(--accent); margin-left:2px }
.sidebar.collapsed .brand .brand-text { display:none }
.sidebar:not(.collapsed) .sidebar-top { padding:6px }

/* compact first row: pulse + collapse icon */
.compact-first-row { display:flex; align-items:center; justify-content:flex-start; gap:8px; padding:6px 0 }
.compact-first-row .expand-btn.small { border:1px solid rgba(2,6,23,0.06); background:transparent; border-radius:6px; padding:6px; cursor:pointer }

/* control row: back + theme icons (icons only) */
.control-row { display:flex; align-items:center; gap:8px; padding:6px 0 }
.control-row .back-btn, .control-row .icon-only { background:transparent; border:0; width:36px; height:36px; display:inline-flex; align-items:center; justify-content:center; border-radius:8px; color:#6b7280 }
.control-row .back-btn:hover, .control-row .icon-only:hover { background:#f3f4f6; color:#0b1220 }
.control-row .back-btn svg { width:18px; height:18px }

/* remove any text labels from control row */
.control-row .back-with-text, .control-row .theme-text { display:none }

/* expanded back button (show icon + text) */
.back-btn { display:inline-flex; align-items:center; gap:8px; color:var(--sidebar-muted); background:transparent; border:0; padding:6px; border-radius:8px }
.back-btn .back-text { display:inline-block; color:var(--sidebar-muted); font-weight:600 }

/* ensure search row takes full width */
.sidebar:not(.collapsed) .sidebar-search { width:100%; margin-top:4px }
.sidebar:not(.collapsed) .search-inner { width:100% }

/* ensure scrollable area is narrow and centered */
.sidebar.collapsed .scrollable-area { display:flex; align-items:center }
.back-icon { opacity:0.9; cursor:pointer; padding:6px; border-radius:8px }

.theme-inline { display:flex; align-items:center; gap:10px; margin-left:8px }
.theme-icons { display:flex; gap:6px; align-items:center; color:var(--muted) }
.theme-icons .sun, .theme-icons .moon { width:18px; height:18px; display:inline-flex }
.switch.inline { position:relative; border:1px solid rgba(255,255,255,0.04); padding:4px; border-radius:999px }
.switch.inline input { width:34px; height:18px; appearance:none; -webkit-appearance:none; background:rgba(255,255,255,0.06); border-radius:999px; position:relative; cursor:pointer }
.switch.inline input + label { position:absolute; left:3px; top:1px; width:14px; height:14px; border-radius:50%; background:white; transition:all .18s }
.switch.inline input:checked + label { transform:translateX(16px) }

.sidebar-search { display:flex; gap:8px; align-items:center }
.search-inner { display:flex; align-items:center; gap:6px; background:var(--card); padding:6px 8px; border-radius:8px }
.sidebar-search input { flex:1; padding:6px 8px; border-radius:8px; border:0; background:transparent; color:var(--text); outline:none; height:34px }
.search-icon { color:var(--muted); display:flex; align-items:center }

.agents { margin-top:2px }
.agents-title { font-size:11px; color:var(--sidebar-muted); margin-bottom:6px; text-transform:uppercase; letter-spacing:0.6px }
.agent-list { display:flex; flex-direction:column; gap:4px }
.agent-item { padding:6px 8px; border-radius:6px; background: transparent; display:flex; gap:8px; align-items:center; cursor:pointer; font-size:13px; color:var(--sidebar-text) }
.agent-icon { display:inline-flex; width:20px; height:20px; align-items:center; justify-content:center; color:var(--accent) }

/* section divider between search / agents / history */
.history-header { padding:0 }
.history-title { font-size:13px; color:var(--sidebar-muted); font-weight:700; padding:2px 2px 6px 2px; text-transform:lowercase; letter-spacing:0.6px }
.history-title::first-letter { text-transform:uppercase }

.time-category h3 { font-size:12px; margin:6px 0 4px; color:var(--sidebar-muted); font-weight:700 }
.time-category .time-count { color:var(--sidebar-muted); font-weight:500; margin-left:6px; font-size:12px }

/* a soft panel background for the left sidebar in light mode */
.sidebar:not(.collapsed) { background: var(--sidebar-surface) !important }

/* reduce spacing to zero between Search -> Agents -> History */
.sidebar .sidebar-search { margin: 0 }
.sidebar .agents { margin: 0 }
.sidebar .history-header { margin: 0 }

/* hide the history header when the sidebar is collapsed */
.sidebar.collapsed .history-header,
.sidebar.collapsed .history-title { display: none !important }

.chat-list { overflow:auto; padding-top:4px; display:flex; flex-direction:column; gap:4px; margin-top:4px }
.chat-item { padding: 4px 6px; border-radius:6px; cursor:pointer; background:transparent; color:var(--sidebar-text) }
.chat-item:hover { background: rgba(255,255,255,0.02) }
.chat-item.active { background: rgba(255,255,255,0.04); box-shadow: inset 0 0 0 1px rgba(255,255,255,0.02) }
.chat-snippet { display:none }

/* Compact icon + title layout */
.chat-title { display:flex; align-items:center; gap:8px; padding:6px 8px; position:relative }
.chat-icon { width:18px; height:18px; display:inline-flex; align-items:center; justify-content:center; color:var(--muted) }
.chat-title-text { display:block; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; font-weight:500; font-size:13px; color: var(--sidebar-text) }

/* Slightly dim non-active history items to improve visual hierarchy */
.chat-history .chat-item .chat-title-text { color: var(--sidebar-muted); font-weight:400 }

/* Disable old CSS pseudo tooltip (we use a floating tooltip appended to body) */
.chat-title[data-tooltip]::after { display: none !important; }

.chat-window { flex:1; display:flex; flex-direction:column; background: linear-gradient(180deg,#f7fbff,#eef6fb); }
.chat-window.empty { display:flex; align-items:center; justify-content:center; color:var(--muted) }
.chat-header { padding:10px 12px; border-bottom:1px solid rgba(255,255,255,0.03); display:flex; align-items:center; gap:8px }
.chat-title-input { width:60%; padding:10px 12px; border-radius:12px; border:0; background:var(--card); color:var(--text); font-weight:700 }

.impersonate { margin-left:16px; display:flex; gap:8px; align-items:center }
.impersonate input { padding:8px 10px; border-radius:8px; border:1px solid rgba(255,255,255,0.06); background:transparent; color:var(--text) }
.impersonate button { padding:8px 10px; border-radius:8px; background:var(--accent); color:white; border:none; cursor:pointer }

/* Messages column: center and constrain width */
.messages { padding:20px 16px; overflow:auto; flex:1; display:flex; flex-direction:column; gap:20px; min-height:0; width:100%; max-width:820px; box-sizing:border-box }
.content-area .messages { margin: 0 auto }
  .sidebar { flex: 0 0 340px !important; height: 100vh !important; min-height: 0; overflow: visible !important; display: flex !important; flex-direction: column !important; }
.message {
  /* let individual messages size to their content by default; bot messages explicitly fill the
     messages column below via .message.bot { width: 100% } */
  width: auto;
  max-width: 100%;
  padding: 14px;
  border-radius: 12px;
  display: block;
  word-break: break-word;
  font-size: 15px;
  line-height: 1.45;
  box-sizing: border-box;
  min-width: 0;
  white-space: normal;
}
.message.user {
  /* shrink-wrap to text, but allow wrapping for long content */
  display: inline-block;
  width: auto;
  max-width: 60%;
  align-self: flex-end;
  margin-left: 16px;
  margin-right: 28px;
  background: linear-gradient(90deg,#2563eb,#1e40af);
  color: white;
  box-shadow: 0 12px 36px rgba(3,105,161,0.18);
  border-radius: 14px;
  padding: 10px 14px;
  font-size: 14px;
  white-space: normal;
}
.message.bot {
  /* bot messages are full-width within the centered messages column */
  display: block;
  width: 100%;
  align-self: flex-start;
  margin-right: 16px;
  margin-left: 0;
  background: transparent;
  color: var(--text);
  display: flex;
  flex-direction: column;
  gap: 12px;
  border: none;
  box-shadow: none;
  border-radius: 12px;
  padding: 14px;
  min-width: 0;
}
.message-body { white-space: pre-wrap; overflow-wrap: anywhere; word-break: break-word; min-width: 0 }

/* Align actions inside bubbles: bot actions start from left, user actions aligned to right */
.message.bot .message-actions { justify-content:flex-start }
.message.user .message-actions { justify-content:flex-end }
.message-actions { display:flex; gap:8px; align-items:center; margin-top:8px; flex-wrap:wrap }
  .time-category { margin:0 !important; }
  .time-category h3 { margin:0 !important; font-size:11px !important; color:var(--muted); padding:0 !important }
  .chat-history { display:flex; flex-direction:column; gap:0 !important }
  .chat-history .time-category { padding:0 !important; border-bottom: none !important }

.icon-btn { background:transparent; border:0; color:var(--muted); padding:6px; border-radius:8px; cursor:pointer; display:inline-flex; align-items:center; justify-content:center; width:44px; height:44px; position:relative; font-size: 1.4rem; }
.icon-btn:hover { background:rgba(2,6,23,0.03); color:var(--text); }
.icon-btn.active { background:rgba(45,212,191,0.08); color:var(--text) }
.icon-btn.copied { background:rgba(96,165,250,0.12); color:var(--text) }
.copied-label { position:absolute; top:-34px; left:50%; transform:translateX(-50%); background:var(--panel); color:var(--text); padding:6px 8px; border-radius:8px; font-size:12px; border:1px solid rgba(255,255,255,0.03); white-space:nowrap }

/* Hide native scrollbars for a cleaner Gemini-like look */
.messages::-webkit-scrollbar { width: 0; height: 0 }
.messages { -ms-overflow-style: none; scrollbar-width: none }

/* Remove bot avatar rules (we render simple cards without left icon) */
.chat-window .messages .message.bot .avatar { display:none !important }

/* Composer (centered rounded pill) */
.input-area { padding:22px 18px; border-top: none; background: transparent; display:flex; justify-content:center }
.input-wrapper { display:flex; align-items:center; gap:12px; background:#ffffff; border-radius:28px; padding:12px 18px; border:1px solid rgba(2,6,23,0.06); box-shadow: 0 12px 40px rgba(16,24,40,0.06); width: 760px; max-width: calc(100% - 48px) }
/* on focus, remove any border color changes */
.input-wrapper:focus-within { 
  border-color: inherit !important; 
  box-shadow: none !important;
}
.input-wrapper input { flex:1; border:0 !important; outline:none; padding:12px 12px; font-size:16px; background:transparent; color:var(--text) }
.input-wrapper .mic-btn, .input-wrapper .send-btn { background:transparent; border:0; width:40px; height:40px; display:inline-flex; align-items:center; justify-content:center; border-radius:50%; cursor:pointer; color:var(--muted); padding:6px }
.input-wrapper .send-btn { color:var(--accent); }
.input-wrapper .mic-btn:hover, .input-wrapper .send-btn:hover { background: rgba(2,6,23,0.02) }

/* Make user message bubble style closer to Gemini (smaller rounded pill) */

.composer { display:flex; gap:6px; padding:10px; border-top:1px solid rgba(255,255,255,0.03); align-items:center }
.composer-input { flex:1; padding:10px 12px; border-radius:999px; border:0; background:var(--card); color:var(--text); outline:none }

.sidebar-bottom { position: sticky; bottom: 8px; z-index: 6; display:flex; align-items:center; justify-content:flex-start; gap:10px }
.theme-toggle { display:none }
.switch { position:relative }
.switch input { width:40px; height:22px; appearance:none; -webkit-appearance:none; background:rgba(255,255,255,0.06); border-radius:999px; position:relative; cursor:pointer }
.switch input:checked { background:linear-gradient(90deg,#60a5fa,#2dd4bf) }
  /* ensure old pseudo-tooltip rules do not interfere */
  .chat-title[data-tooltip]::after { display: none !important; }
.switch input + label { position:absolute; left:4px; top:3px; width:16px; height:16px; border-radius:50%; background:white; transition:all .18s }
.switch input:checked + label { transform:translateX(18px) }
.theme-labels { font-size:12px; color:var(--muted); display:flex; gap:8px }
.new-chat.bottom { background:transparent; border:1px dashed rgba(255,255,255,0.04); color:var(--text); padding:10px 12px; border-radius:10px; width:100%; text-align:center }

/* Content area inside chat window: scrollable main content */
.chat-window { display:flex; flex-direction:column; flex:1; min-height:0; }
.content-area { flex:1; overflow: visible; padding:24px 32px; min-height:0; display:flex; justify-content:center }
.no-messages { color:var(--muted); padding:12px }

/* Input area fixed at bottom inside chat window layout */
.input-area { display:flex; gap:6px; padding:8px 12px; border-top:1px solid rgba(255,255,255,0.03); align-items:center; background:transparent }
.input-area input { flex:1; padding:10px 12px; border-radius:999px; border:0; background:var(--card); color:var(--text); outline:none }
.input-area button { padding:8px 10px; border-radius:10px; background:var(--accent); color:white; border:none; cursor:pointer }

/* Dashboard styles */
.dashboard { max-width:1000px; margin:0 auto; }
.stats { display:flex; gap:20px; margin:12px 0 20px }
.stat { background:rgba(255,255,255,0.02); padding:18px; border-radius:8px; min-width:160px }
.stat h3 { margin:0; font-size:22px }
.details { width:100%; border-collapse:collapse; margin-top:12px }
.details th, .details td { text-align:left; padding:8px 10px; border-bottom:1px solid rgba(255,255,255,0.03); font-size:13px }
.action-button { margin-top:18px; padding:12px 20px; border-radius:999px; background:linear-gradient(90deg,var(--accent),#60a5fa); border:none; color:white; cursor:pointer }

/* responsive tweaks */
@media (max-width: 800px) {
  .sidebar { display:none }
}

/* ===== Visual overrides to match reference dark theme ===== */
/* Sidebar surface */
.sidebar { width: 340px !important; padding:12px !important; gap:8px !important; background: linear-gradient(180deg,#021521 0%, #052b3a 100%) !important; border-right:1px solid rgba(255,255,255,0.06) !important; box-shadow: inset -12px 0 40px rgba(0,0,0,0.6) }

/* Chat panel surface */
.chat-window { background: linear-gradient(180deg,#071928 0%, #0a2631 100%) !important; }
.chat-window.empty { color:var(--muted) }

/* Panel surface class for inner usage */
.panel-surface { background: linear-gradient(180deg,#071928,#0a2631); }

/* Theme switch - more visible thumb and track */
.switch.inline { border:1px solid rgba(255,255,255,0.12) !important; background: rgba(255,255,255,0.02) !important; padding:4px; border-radius:999px }
.switch.inline input + label { background: linear-gradient(180deg,#ffffff,#e6eef8); box-shadow:0 2px 6px rgba(2,6,23,0.18); width:14px; height:14px }
.switch.inline input:checked + label { background: linear-gradient(180deg,#ffd166,#ff7b00) }

/* New chat button: white in dark mode, subtle in light mode */
.new-chat.bottom { padding:12px 14px; border-radius:12px; width:100%; text-align:center; font-weight:700; cursor:pointer; border:none }
[data-theme='dark'] .new-chat.bottom { background:#ffffff; color:#071428; box-shadow: 0 10px 30px rgba(2,6,23,0.12); }
[data-theme='light'] .new-chat.bottom { background: linear-gradient(90deg,#f8fafc,#ffffff); color:#0b1220; box-shadow: 0 6px 18px rgba(2,6,23,0.04); }

/* Back with text (near brand) */
.brand-left { align-items:center }
.back-with-text { display:flex; align-items:center; gap:8px; margin-right:8px; cursor:pointer; padding:6px 8px; border-radius:8px }
.back-with-text:hover { background: rgba(255,255,255,0.02) }
.back-with-text .back-icon-small { width:18px; height:18px; display:inline-flex; align-items:center; justify-content:center; color:var(--muted) }
.back-with-text .back-text { color:var(--muted); font-size:13px; font-weight:600 }

/* Slightly narrower chat items and refined hover */
.chat-item { padding:10px 12px; border-radius:10px }
.chat-item:hover { background: rgba(255,255,255,0.03) }

/* Message bubble polish */
/* unified user bubble style defined above */
/* default bot bubble styles are defined later to ensure consistent white card appearance */

/* Composer tweaks */
.composer { padding:18px; gap:10px }
.composer-input { padding:14px 18px }

/* ensure theme icons contrast */
.theme-icons .sun, .theme-icons .moon { color:var(--muted) }

/* small responsive tweak for narrow screens */
@media (max-width: 900px) {
  .sidebar { width: 300px }
}

/* Sidebar scrolling: ensure the chat history area scrolls while New Chat stays sticky */
.sidebar {
  display: flex !important;
  flex-direction: column !important;
  width: 340px !important;
  height: 100vh !important;
  min-height: 0 !important;
  padding: 12px !important;
  overflow: visible !important; /* allow floating tooltip to escape */
}

.sidebar .sidebar-top {
  flex: 0 0 auto;
}

.sidebar .sidebar-search,
.sidebar .agents {
  flex: 0 0 auto;
}

.sidebar .chat-list {
  flex: 1 1 auto;
  overflow: auto;
  min-height: 0;
  padding-top: 12px;
  margin-top: 10px;
}

.sidebar .scrollable-area {
  display: flex;
  flex-direction: column;
  gap: 8px;
  overflow: auto; /* single scroll container for both chat-list and chat-history */
  flex: 1 1 auto;
  min-height: 0;
  padding-right: 6px; /* give room for scrollbar */
  max-height: calc(100vh - 120px); /* reduced reserved top space so more history shows */
  padding-bottom: 72px; /* ensure last items are reachable above the sticky button */
}

/* inner lists flow naturally inside the scrollable-area */
.sidebar .scrollable-area .chat-list,
.sidebar .scrollable-area .chat-history {
  overflow: visible;
  min-height: 0;
}

/* spacing and truncation to avoid overlapping lines */
.sidebar .chat-item { padding: 8px 10px; border-radius:8px; margin-bottom: 6px; display:block }
.sidebar .chat-item .chat-title { font-weight:400; font-size:13px; color:var(--text); display:block }
.sidebar .chat-item .chat-title .chat-title-text { font-weight:400 }

/* Time category headings (Today, Yesterday) use normal weight */
.sidebar .time-category h3 { font-weight:400; color:var(--muted) }

/* Hide native scrollbars but keep the container scrollable */
.sidebar .scrollable-area {
  -ms-overflow-style: none; /* IE 10+ */
  scrollbar-width: none; /* Firefox */
}
.sidebar .scrollable-area::-webkit-scrollbar { width: 0; height: 0; }

/* Ensure agent name uses accent color consistently */
.sidebar:not(.collapsed) .agent-item > span:last-child { color: var(--accent); font-weight:500 }
.sidebar .chat-item .chat-snippet { display:none !important }

.time-category { margin:0; }
.time-category h3 { margin:0; font-size:11px; color:var(--muted); padding:6px 0 }

.chat-history { display:flex; flex-direction:column; gap:0 }
.chat-history .time-category { padding:0; border-bottom: none }
.chat-history .chat-item { background: transparent }
.chat-history .chat-item.active { background: rgba(45,212,191,0.06); }
.chat-history .chat-item:hover { background: rgba(255,255,255,0.02) }

/* per-chat three-dot menu (appear only when hovering the title; open on click) */
.chat-item { position: relative }
.chat-item .chat-body { cursor: pointer; padding-right: 48px }
.menu-btn { background:transparent; border:0; font-size:18px; width:34px; height:34px; border-radius:8px; cursor:pointer; color:var(--muted); position:absolute; right:8px; top:8px; display:none; align-items:center; justify-content:center }
/* show the three-dot only when the user hovers (or focuses) the title itself */
.chat-item .chat-title:hover ~ .menu-btn, .chat-item:focus-within .chat-title ~ .menu-btn { display:inline-flex }
/* popover is controlled by click (menu-open class) so it doesn't appear on simple hover */
.chat-item .menu-pop { display:none; position:absolute; right:8px; top:40px; background:var(--panel); border:1px solid rgba(255,255,255,0.04); padding:6px; border-radius:8px; box-shadow:0 8px 24px rgba(2,6,23,0.12); min-width:140px; z-index:30 }
.chat-item.menu-open .menu-pop { display:block }
.menu-item { display:block; padding:8px 12px; background:transparent; border:0; cursor:pointer; width:100%; text-align:left; color:var(--text); font-size:14px }
.menu-item:hover { background: rgba(255,255,255,0.02) }

.chat-item.pinned .chat-title::after { content: ' ðŸ“Œ'; margin-left:6px }

/* mic tooltip */
.mic-tooltip { position: fixed; right: 24px; bottom: 120px; background: rgba(2,6,23,0.9); color:white; padding:8px 12px; border-radius:8px; box-shadow:0 8px 24px rgba(2,6,23,0.2) }

/* Mic and Send button styling to match pill-shaped blue send UI */
.mic-btn { width:40px; height:40px; border-radius:999px; border:1px solid rgba(255,255,255,0.06); background:transparent; color:var(--text); display:inline-flex; align-items:center; justify-content:center; cursor:pointer; font-size:1rem }
.mic-btn:hover { background: rgba(255,255,255,0.02) }

.send-btn { padding:8px 10px; border-radius:999px; background: transparent; border: none; color: inherit; cursor:pointer; display:inline-flex; align-items:center; justify-content:center; font-size:1.05rem; box-shadow: none }
.send-btn:hover { transform: none; box-shadow: none; background: rgba(2,6,23,0.03) }

/* Strong overrides to ensure grouped history is scrollable and doesn't overlap */
.aside.sidebar > .scrollable-area {
  flex: 1 1 auto !important;
  min-height: 0 !important;
  overflow: auto !important;
  padding-right: 8px !important;
  padding-bottom: 72px !important; /* safety area above the sticky New Chat */
  display: block !important;
}

/* visual separation for groups */
.aside.sidebar .time-category { margin: 0 !important; padding: 0 !important; }
.aside.sidebar .time-category h3 { margin: 0 !important; font-size:11px !important; font-weight:700 !important; color:var(--muted) !important; }

/* Floating tooltip (JS-created element appended to document.body) */
.floating-tooltip {
  position: fixed;
  left: 0;
  top: 0;
  transform: translate(-50%, -100%);
  background: rgba(17,17,17,0.94);
  color: #fff;
  padding: 6px 10px;
  border-radius: 6px;
  font-size: 12px;
  pointer-events: none;
  z-index: 99999;
  box-shadow: 0 6px 18px rgba(0,0,0,0.25);
  max-width: 420px;
  white-space: normal; /* allow wrapping */
  overflow-wrap: anywhere;
  word-break: break-word;
  max-height: 220px;
  overflow: auto;
  transition: opacity 120ms ease, transform 120ms ease;
  opacity: 0.98;
}

/* Theme toggle in the header */
.theme-toggle { display:inline-flex; gap:6px; background:transparent; border-radius:8px; align-items:center }
.theme-toggle .theme-icon { width:36px; height:36px; display:flex; align-items:center; justify-content:center; border-radius:8px; background:transparent; border:1px solid transparent; color:var(--muted); cursor:pointer }
.theme-toggle .theme-icon:hover { background: rgba(255,255,255,0.02); color:var(--text) }
.theme-toggle .theme-icon.active { background: linear-gradient(90deg,#60a5fa,#34d399); color:white; border-color: rgba(255,255,255,0.04); box-shadow:0 6px 18px rgba(3,105,161,0.12) }

/* Back button in top left */
.brand-row .back-btn { width:36px; height:36px; display:inline-flex; align-items:center; justify-content:center; border-radius:8px; border:0; background:transparent; color:var(--muted); cursor:pointer }
.brand-row .back-btn:hover { background: rgba(255,255,255,0.02); color:var(--text) }

/* collapse toggle button in expanded header */
.collapse-toggle { width:36px; height:36px; display:inline-flex; align-items:center; justify-content:center; border-radius:8px; border:0; background:transparent; color:var(--muted); cursor:pointer }
.collapse-toggle:hover { background: rgba(255,255,255,0.02); color:var(--text) }


.aside.sidebar .chat-item { margin-bottom:6px !important; padding:6px 8px !important; }
.aside.sidebar .chat-item .chat-title { display:block; font-weight:700; font-size:13px; color:var(--text) }
.aside.sidebar .chat-item .chat-snippet { display:none !important }

/* bottom spacer to make sure last item is reachable */
.scrollable-area::after { content: ""; display:block; height:20px }

.sidebar-bottom {
  position: sticky;
  bottom: 20px;
  z-index: 6;
  flex: 0 0 auto;
  background: transparent;
}

/* Corner image row (top-left) */
.corner-row { display:flex; align-items:flex-start; padding-bottom:6px }
.corner-image img { width:48px; height:48px; object-fit:contain; border-radius:6px }

/* header row containing back+brand on left and status+switch on right */
.header-row { display:flex; align-items:center; justify-content:space-between; gap:10px }
.header-row .left-row { display:flex; align-items:center; gap:10px }
.header-row .right-row { display:flex; align-items:center; gap:12px }

/* Light theme sidebar tweaks to match reference image */
[data-theme='light'] .sidebar { background: linear-gradient(180deg,#ffffff,#f8fafc) !important; box-shadow:none !important; }
[data-theme='light'] .pulse-icon { background: linear-gradient(90deg,#60a5fa,#34d399); color:#0b1220 }
[data-theme='light'] .back-with-text:hover { background: rgba(3,7,18,0.02) }
[data-theme='light'] .back-with-text .back-text { color:#374151 }

/* Light theme: ensure bot responses are readable and panel is light */
[data-theme='light'] .message.bot { color: var(--text) !important }
[data-theme='light'] .message.bot .message-body { color: var(--text) !important }
[data-theme='light'] .chat-window { background: linear-gradient(180deg,#fbfdff,#f4f7fb) !important; box-shadow: none !important }

/* Light theme: New chat button uses navy blue */
[data-theme='light'] .new-chat.bottom { background: #0b3d91 !important; color: #ffffff !important; box-shadow: 0 6px 18px rgba(11,61,145,0.12) }


/* End visual overrides */

/* --- Custom visual updates per designer request --- */
/* Distinct sidebar background and stronger separation */
.sidebar { background: linear-gradient(180deg,#041224,#062433) !important; border-right:1px solid rgba(255,255,255,0.06) !important; box-shadow: inset -8px 0 30px rgba(0,0,0,0.45); }

/* Slightly different chat window background so panels read as separate */
.chat-window { background: linear-gradient(180deg,#061824,#082534) !important }

/* More visible inline theme switch */
.switch.inline { border:1px solid rgba(255,255,255,0.10); padding:4px; border-radius:999px; background: rgba(255,255,255,0.02) }
.switch.inline input + label { background:linear-gradient(180deg,#ffffff,#e6eef8); box-shadow:0 2px 6px rgba(2,6,23,0.18) }
.switch.inline input:checked + label { background:linear-gradient(180deg,#ffd166,#ff7b00) }

/* New Chat button: white in dark mode, lighter in light mode */
.new-chat.bottom { padding:12px 14px; border-radius:10px; width:100%; text-align:center; font-weight:700; cursor:pointer; background: #ffffff; color: #071428; box-shadow: 0 6px 18px rgba(2,6,23,0.08); border: none }
[data-theme='light'] .new-chat.bottom { background: linear-gradient(90deg,#f8fafc,#ffffff); color:#0b1220 }

/* back-with-text styling (next to pulse icon) */
.back-with-text { display:flex; align-items:center; gap:8px; margin-right:6px; cursor:pointer }
.back-with-text .back-icon-small { display:inline-flex; width:18px; height:18px; align-items:center; justify-content:center; color:var(--muted) }
.back-with-text .back-text { color:var(--muted); font-size:13px }

/* End custom visual updates */

.status-and-back { display:flex; align-items:center; gap:8px }
.backend-status { width:10px; height:10px; border-radius:50%; border:1px solid rgba(255,255,255,0.06) }
.backend-status.unknown { background:rgba(255,255,255,0.02) }
.backend-status.ok { background:limegreen } 
.backend-status.down { background:crimson }

/* Adjust icon sizes */
.icon-btn { font-size: 1.5rem; }

/* Professional UI adjustments */

/* Align back and switch buttons */
.back-with-text {
  display: flex !important;
  align-items: center !important;
  justify-content: space-between !important;
  padding: 0 16px !important;
  gap: 12px !important;
}

.switch.inline {
  display: inline-flex !important;
  align-items: center !important;
  gap: 10px !important;
  border: 2px solid rgba(255, 255, 255, 0.7) !important;
  background: rgba(255, 255, 255, 0.2) !important;
  padding: 6px 10px !important;
  border-radius: 999px !important;
}

.switch.inline .sun {
  order: -1 !important;
  color: #f8e71c !important;
  font-size: 1.2rem !important;
}

.switch.inline .moon {
  order: 1 !important;
  color: #4a90e2 !important;
  font-size: 1.2rem !important;
}

/* Make switch visible in dark mode */
[data-theme='dark'] .switch.inline {
  border: 2px solid rgba(255, 255, 255, 0.9) !important;
  background: rgba(255, 255, 255, 0.3) !important;
}

/* Differentiate background colors */
.sidebar {
  background: linear-gradient(180deg, #021521, #052b3a) !important;
  box-shadow: inset -8px 0 30px rgba(0, 0, 0, 0.5) !important;
}

.chat-window {
  background: linear-gradient(180deg, #071928, #0a2631) !important;
  box-shadow: inset 0 -8px 30px rgba(0, 0, 0, 0.5) !important;
}

[data-theme='light'] .sidebar {
  background: linear-gradient(180deg, #f8fafc, #ffffff) !important;
  box-shadow: inset -8px 0 30px rgba(0, 0, 0, 0.1) !important;
}

/* Lightweight search visuals for left sidebar (both themes)
   These high-specificity rules force a very subtle, low-contrast appearance
   for the search box border, icon and input text so it reads as 'lightweight'. */

/* Dark mode: subtle off-white border and text/icon (restored) */
html:not([data-theme='light']) .sidebar:not(.collapsed) .sidebar-search .search-inner {
  background: transparent !important;
  border: 1px solid rgba(255,255,255,0.06) !important;
  padding: 8px 10px !important;
  border-radius: 8px !important;
}
html:not([data-theme='light']) .sidebar:not(.collapsed) .sidebar-search .search-inner .search-icon,
html:not([data-theme='light']) .sidebar:not(.collapsed) .sidebar-search .search-inner input {
  color: rgba(255,255,255,0.58) !important;
}
html:not([data-theme='light']) .sidebar:not(.collapsed) .sidebar-search .search-inner input::placeholder {
  color: rgba(255,255,255,0.36) !important;
  opacity: 1 !important;
}

/* (cleaned) Light-mode sidebar search visuals consolidated later in the file */

/* Keep focus appearance equally subtle (no large jump in contrast) */
/* Focus: light theme uses OKLCH; dark theme uses a slightly stronger faint white */
html[data-theme='light'] .sidebar:not(.collapsed) .sidebar-search .search-inner:focus-within {
  border-color: rgba(2,6,23,0.12) !important; /* stronger but not harsh */
}
html:not([data-theme='light']) .sidebar:not(.collapsed) .sidebar-search .search-inner:focus-within {
  border-color: rgba(255,255,255,0.18) !important; /* visible on dark bg */
}


/* Ensure the chat composer input always shows a visible border and the mic/send
   icons use the same color as that border. We use --accent so the color adapts
   to the active theme (light/dark). These high-specificity rules are placed
   at the end of the file to override earlier duplicated selectors. */
.chat-window .input-wrapper {
  /* keep a constant visible border even when not focused; use the preferred
     light-mode text color so mic/send match light-mode visuals in dark mode */
  border: 1px solid #102033 !important; /* hex fallback */
  border: 1px solid oklch(.3908 .128 256 / 1) !important;
  box-shadow: 0 8px 24px rgba(16,24,40,0.04) !important;
}

/* FINAL OVERRIDE: Force light-mode sidebar search to start with a light border,
   keep icon/text in the OKLCH color constant, and darken only the border on
   focus. This block intentionally uses very specific selectors and !important
   and is placed at the end so it overrides earlier rules (including the
   earlier blue focus rule). */
html[data-theme='light'] .sidebar:not(.collapsed) .sidebar-search .search-inner {
  background: transparent !important;
  border: 1px solid rgba(2,6,23,0.04) !important; /* initial light border */
  padding: 8px 10px !important;
  border-radius: 8px !important;
}
html[data-theme='light'] .sidebar:not(.collapsed) .sidebar-search .search-inner .search-icon,
html[data-theme='light'] .sidebar:not(.collapsed) .sidebar-search .search-inner input {
  color: oklch(.928 .0359 250.6 / 1) !important; /* constant icon/text color */
}
html[data-theme='light'] .sidebar:not(.collapsed) .sidebar-search .search-inner input::placeholder {
  color: oklch(.928 .0359 250.6 / 1) !important;
  opacity: 0.86 !important;
}
/* On focus (click) in light mode make the border darker; icon/text remain constant */
html[data-theme='light'] .sidebar:not(.collapsed) .sidebar-search .search-inner:focus-within {
  border-color: rgba(2,6,23,0.16) !important; /* stronger dark border on click */
}


.chat-window .input-wrapper:focus-within {
  /* Remove any border color changes on focus */
  border-color: inherit !important;
  box-shadow: none !important;
}

.chat-window .input-wrapper input {
  /* ensure caret matches the chosen color and input remains readable */
  caret-color: oklch(.3908 .128 256 / 1) !important;
  color: var(--text) !important;
}

/* make mic and send icons the same color as the light-mode input color
   so they read consistently across themes */
.chat-window .input-wrapper .mic-btn,
.chat-window .input-wrapper .send-btn {
  color: #102033 !important; /* fallback */
  color: oklch(.3908 .128 256 / 1) !important;
  /* ensure icons don't get a different border/background from earlier rules */
  border-color: transparent !important;
  background: transparent !important;
}

/* keep hover background subtle but keep the icon color stable */
.chat-window .input-wrapper .mic-btn:hover,
.chat-window .input-wrapper .send-btn:hover {
  background: rgba(2,6,23,0.03) !important;
  color: oklch(.3908 .128 256 / 1) !important;
}

/* For light theme ensure the same rule still applies (higher specificity) */
html[data-theme='light'] .chat-window .input-wrapper {
  border: 1px solid #102033 !important;
  border: 1px solid oklch(.3908 .128 256 / 1) !important;
}

/* Ensure input inside wrapper has no border in both light and dark mode */
html[data-theme='light'] .input-wrapper input,
:not([data-theme='light']) .input-wrapper input,
html[data-theme='light'] .input-wrapper textarea,
:not([data-theme='light']) .input-wrapper textarea {
  border: none !important;
  box-shadow: none !important;
  outline: none !important;
}

/* Remove focus effects from input wrapper containers */
html[data-theme='light'] .input-wrapper:focus-within,
:not([data-theme='light']) .input-wrapper:focus-within {
  border-color: inherit !important;
  box-shadow: inherit !important;
}


[data-theme='light'] .chat-window {
  background: linear-gradient(180deg, #ffffff, #e6eef8) !important;
  box-shadow: inset 0 -8px 30px rgba(0, 0, 0, 0.1) !important;
}

/* Strongly enforce the reference light expanded sidebar appearance to override earlier duplicates */
[data-theme='light'] .sidebar:not(.collapsed) {
  background: #ffffff !important;
  color: #0b1220 !important;
  border-right: 1px solid rgba(2,6,23,0.04) !important;
  padding: 12px !important;
  width: 320px !important;
  box-shadow: none !important;
  transition: width .18s ease, padding .18s ease;
}

/* Defensive final fallback: enforce OKLCH + hex fallback for light-mode sidebar search
   This is placed at the absolute end so it wins over any earlier focus rules. */
html[data-theme='light'] .sidebar:not(.collapsed) .sidebar-search .search-inner {
  border: 1px solid #102033 !important; /* fallback */
  border: 1px solid oklch(.928 .0359 250.6 / 1) !important;
}
html[data-theme='light'] .sidebar:not(.collapsed) .sidebar-search .search-inner .search-icon,
html[data-theme='light'] .sidebar:not(.collapsed) .sidebar-search .search-inner input {
  color: #102033 !important;
  color: oklch(.928 .0359 250.6 / 1) !important;
}
html[data-theme='light'] .sidebar:not(.collapsed) .sidebar-search .search-inner input::placeholder {
  color: #102033 !important;
  color: oklch(.928 .0359 250.6 / 1) !important;
  opacity: 0.86 !important;
}


/* Light mode back button styling - ensure both icon and text are visible */
[data-theme='light'] .sidebar .back-btn,
[data-theme='light'] .sidebar .back-btn svg,
[data-theme='light'] .sidebar .back-left .back-btn,
[data-theme='light'] .sidebar .back-left .back-btn svg,
[data-theme='light'] .sidebar .back-left .back-btn .back-text {
  color: #1a1a1a !important;
  stroke: #1a1a1a !important;
  fill: none !important;
  display: inline-flex !important;
  align-items: center !important;
  gap: 6px !important;
}

/* Ensure back button is visible in light mode */
[data-theme='light'] .sidebar .back-btn .back-text {
  display: inline !important;
  color: #1a1a1a !important;
}

/* Light mode Pulse icon - bright blue to match reference */
[data-theme='light'] .sidebar .brand svg,
[data-theme='light'] .sidebar .brand-left svg,
[data-theme='light'] .sidebar:not(.collapsed) .brand svg,
[data-theme='light'] .sidebar:not(.collapsed) .brand-left svg {
  background: linear-gradient(135deg, #007acc, #005299) !important;
  color: #ffffff !important;
  width: 32px !important;
  height: 32px !important;
  border-radius: 8px !important;
  box-shadow: 0 2px 8px rgba(0, 122, 204, 0.2) !important;
  padding: 6px !important;
}

/* Ensure Pulse icon path is white */
[data-theme='light'] .sidebar .brand svg path,
[data-theme='light'] .sidebar .brand-left svg path,
[data-theme='light'] .sidebar:not(.collapsed) .brand svg path,
[data-theme='light'] .sidebar:not(.collapsed) .brand-left svg path {
  stroke: #ffffff !important;
  fill: none !important;
}

/* Light mode theme toggle styling to match original design */
[data-theme='light'] .switch.inline {
  border: 1px solid #cccccc !important;
  background: #ffffff !important;
  padding: 4px 8px !important;
  border-radius: 20px !important;
}

[data-theme='light'] .switch.inline .sun {
  order: -1 !important;
  color: #ffa500 !important;
  font-size: 16px !important;
}

[data-theme='light'] .switch.inline .moon {
  order: 1 !important;
  color: #4a90e2 !important;
  font-size: 16px !important;
}

[data-theme='light'] .switch.inline input {
  background: #e9ecef !important;
  border: none !important;
}

[data-theme='light'] .switch.inline input:checked {
  background: #007acc !important;
}

[data-theme='light'] .switch.inline input + label {
  background: #ffffff !important;
  box-shadow: 0 1px 3px rgba(0,0,0,0.2) !important;
}

/* Light mode brand title styling */
[data-theme='light'] .sidebar:not(.collapsed) .brand-title,
[data-theme='light'] .sidebar .brand-title { 
  color: #007acc !important; 
  font-weight: 700 !important; 
  margin-left: 8px !important; 
  font-size: 16px !important;
}

/* Ensure light mode icons and colors override any other rules */
html[data-theme='light'] .sidebar .back-btn,
html[data-theme='light'] .sidebar .back-btn svg,
html[data-theme='light'] .sidebar .back-with-text,
html[data-theme='light'] .sidebar .back-with-text .back-icon-small,
html[data-theme='light'] .sidebar .back-with-text .back-icon-small svg,
html[data-theme='light'] .sidebar .back-with-text .back-text {
  color: #1a1a1a !important;
  stroke: #1a1a1a !important;
  fill: none !important;
}

html[data-theme='light'] .sidebar .pulse-icon,
html[data-theme='light'] .sidebar:not(.collapsed) .pulse-icon {
  background: linear-gradient(135deg, #007acc, #005299) !important;
  color: #ffffff !important;
  width: 32px !important;
  height: 32px !important;
  border-radius: 8px !important;
  box-shadow: 0 2px 8px rgba(0, 122, 204, 0.3) !important;
}

html[data-theme='light'] .sidebar .pulse-icon svg,
html[data-theme='light'] .sidebar:not(.collapsed) .pulse-icon svg {
  color: #ffffff !important;
  stroke: currentColor !important;
  fill: currentColor !important;
}

/* Light mode agent styling - blue names and icons */
[data-theme='light'] .sidebar:not(.collapsed) .agents-title { 
  color: #666666 !important; 
  font-weight: 600 !important;
  font-size: 11px !important;
  text-transform: uppercase !important;
  letter-spacing: 0.5px !important;
}

[data-theme='light'] .sidebar:not(.collapsed) .agent-item { 
  background: transparent !important; 
  border-radius: 6px !important; 
  padding: 6px 8px !important; 
  color: #333333 !important; 
  font-size: 13px !important; 
  font-weight: 400 !important;
}

/* Agent names should be blue in light mode */
[data-theme='light'] .sidebar:not(.collapsed) .agent-item > span:last-child {
  color: #007acc !important;
  font-weight: 500 !important;
}

[data-theme='light'] .sidebar:not(.collapsed) .agent-icon { 
  color: #007acc !important;
  background: transparent !important;
  width: 24px !important;
  height: 24px !important;
}

[data-theme='light'] .sidebar:not(.collapsed) .sidebar-search { margin-top:8px }
[data-theme='light'] .sidebar:not(.collapsed) .search-inner {
  /* keep search background transparent in light mode so panel surface shows through */
  background: transparent !important;
  /* fallback border color and OKLCH preferred color for search box border */
  border: 1px solid #102033;
  border: 1px solid oklch(.3908 .128 256 / 1);
  padding:10px 12px;
  border-radius:10px;
}
[data-theme='light'] .sidebar:not(.collapsed) .search-inner .search-icon {
  color: #102033 !important;
  color: oklch(.3908 .128 256 / 1) !important;
}
[data-theme='light'] .sidebar:not(.collapsed) .sidebar-search input {
  /* fallback text color and OKLCH preferred color for input text */
  color: #102033;
  color: oklch(.3908 .128 256 / 1);
}

/* Strong overrides: ensure light-mode search border and input color win (including focus) */
[data-theme='light'] .sidebar:not(.collapsed) .search-inner,
[data-theme='light'] .sidebar:not(.collapsed) .search-inner:focus-within {
  /* hex fallback for older browsers */
  border: 1px solid #102033 !important;
  border: 1px solid oklch(.3908 .128 256 / 1) !important;
}

[data-theme='light'] .sidebar:not(.collapsed) .sidebar-search input {
  color: #102033 !important;
  color: oklch(.3908 .128 256 / 1) !important;
}

/* Final high-specificity enforcement for light-mode search input and placeholder */
[data-theme='light'] .sidebar:not(.collapsed) .search-inner input,
[data-theme='light'] .sidebar .search-inner input,
[data-theme='light'] .sidebar .sidebar-search input,
[data-theme='light'] .sidebar input {
  color: #102033 !important;
  color: oklch(.3908 .128 256 / 1) !important;
  caret-color: oklch(.3908 .128 256 / 1) !important;
}

[data-theme='light'] .sidebar:not(.collapsed) .search-inner input::placeholder,
[data-theme='light'] .sidebar .search-inner input::placeholder,
[data-theme='light'] .sidebar .sidebar-search input::placeholder {
  color: #102033 !important;
  color: oklch(.3908 .128 256 / 1) !important;
  opacity: 1 !important;
}

/* Ensure the search-inner border is always visible in light mode (not only on focus/typing) */
[data-theme='light'] .sidebar:not(.collapsed) .search-inner {
  background: #f5f7fa !important;
  border-style: solid !important;
  border-width: 1px !important;
  border-color: oklch(.3908 .128 256 / 1) !important;
}

/* FINAL: very high-specificity override for left-sidebar search box only (light mode)
   Targets only the sidebar search area so chat-window inputs are unaffected. */
html[data-theme='light'] .sidebar:not(.collapsed) .sidebar-search .search-inner {
  /* keep search background transparent in light mode */
  background: transparent !important;
  border: 1px solid #102033 !important; /* hex fallback */
  border: 1px solid oklch(.3908 .128 256 / 1) !important;
}

html[data-theme='light'] .sidebar:not(.collapsed) .sidebar-search .search-inner input {
  color: #102033 !important;
  color: oklch(.3908 .128 256 / 1) !important;
  caret-color: oklch(.3908 .128 256 / 1) !important;
}

html[data-theme='light'] .sidebar:not(.collapsed) .sidebar-search .search-inner input::placeholder {
  color: #102033 !important;
  color: oklch(.3908 .128 256 / 1) !important;
  opacity: 1 !important;
}

[data-theme='light'] .sidebar:not(.collapsed) .agents { margin-top:8px }
[data-theme='light'] .sidebar:not(.collapsed) .agent-item { background: transparent; border-radius:8px; padding:6px 8px; color:#0b1220; font-size:13px; font-weight:500 }
[data-theme='light'] .sidebar:not(.collapsed) .agent-icon { color:#2563eb }

/* Light mode time category and chat history styling */
[data-theme='light'] .sidebar:not(.collapsed) .time-category h3 { 
  color: #666666 !important; 
  font-weight: 600 !important; 
  margin: 0 !important; 
  font-size: 12px !important;
  text-transform: uppercase !important;
  letter-spacing: 0.5px !important;
}

[data-theme='light'] .sidebar:not(.collapsed) .chat-history .chat-item { 
  background: transparent !important; 
  margin-bottom: 4px !important; 
  padding: 6px 8px !important; 
  border-radius: 6px !important;
}

[data-theme='light'] .sidebar:not(.collapsed) .chat-history .chat-item.active { 
  background: #f0f8ff !important;
}

[data-theme='light'] .sidebar:not(.collapsed) .chat-title { 
  color: #333333 !important;
  font-size: 13px !important;
  font-weight: 500 !important;
}

[data-theme='light'] .sidebar:not(.collapsed) .chat-snippet { 
  display: none !important;
}

/* Final compact chat-history overrides: force zero padding and consistent icon+title layout */
.sidebar .chat-item,
.chat-history .chat-item,
.aside.sidebar .chat-item,
[data-theme='light'] .sidebar:not(.collapsed) .chat-history .chat-item {
  padding: 0 !important;
  margin-bottom: 4px !important;
}

.sidebar .chat-item .chat-title,
.chat-history .chat-item .chat-title {
  display: flex !important;
  align-items: center !important;
  gap: 8px !important;
  padding: 6px 8px !important;
  position: relative !important;
}

.sidebar .chat-item .chat-icon,
.chat-history .chat-item .chat-icon {
  width: 18px !important;
  height: 18px !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  color: var(--muted) !important;
}

.sidebar .chat-item .chat-title-text,
.chat-history .chat-item .chat-title-text {
  display: block !important;
  white-space: nowrap !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
  font-weight: 400 !important;
  font-size: 13px !important;
  color: var(--sidebar-text) !important;
}

/* Tooltip from data-tooltip attribute â€” shown on hover */
.sidebar .chat-item .chat-title[data-tooltip]:hover::after,
.chat-history .chat-item .chat-title[data-tooltip]:hover::after {
  content: attr(data-tooltip) !important;
  position: absolute !important;
  left: calc(100% + 8px) !important;
  top: 50% !important;
  transform: translateY(-50%) !important;
  background: var(--panel) !important;
  color: var(--text) !important;
  padding: 6px 8px !important;
  border-radius: 8px !important;
  white-space: nowrap !important;
  box-shadow: 0 8px 24px rgba(2,6,23,0.2) !important;
  z-index: 9999 !important;
}

[data-theme='light'] .sidebar:not(.collapsed) .menu-btn { color:#6b7280 }

[data-theme='light'] .sidebar:not(.collapsed) .sidebar-bottom { padding:12px 0 }
[data-theme='light'] .sidebar:not(.collapsed) .new-chat.bottom { background: linear-gradient(90deg,#2563eb,#1e3a8a); color:#fff; padding:10px 12px; border-radius:10px; width:100%; box-shadow:0 10px 30px rgba(37,99,235,0.08); border:none }

/* ensure collapsed state still remains icon-only unaffected */
.sidebar.collapsed { width:56px !important }


/* Apply calm and professional colors */

/* Sidebar background */
.sidebar {
  background: linear-gradient(180deg, #2c3e50, #34495e) !important;
  box-shadow: inset -8px 0 30px rgba(0, 0, 0, 0.4) !important;
}

/* Chat window background */
.chat-window {
  background: linear-gradient(180deg, #ecf0f1, #bdc3c7) !important;
  box-shadow: inset 0 -8px 30px rgba(0, 0, 0, 0.2) !important;
}

/* Light mode sidebar background */
[data-theme='light'] .sidebar {
  background: linear-gradient(180deg, #f5f5f5, #e0e0e0) !important;
  box-shadow: inset -8px 0 30px rgba(0, 0, 0, 0.1) !important;
}

/* Light mode chat window background - exact light gray as shown in reference */
[data-theme='light'] .chat-window,
html[data-theme='light'] .chat-window { 
  background: #f5f6f8 !important; 
  box-shadow: none !important;
}

/* Ensure light mode overrides take precedence */
html[data-theme='light'] .sidebar:not(.collapsed) {
  background: #ffffff !important;
  border-right: 1px solid #e1e5e9 !important;
  box-shadow: none !important;
}

/* Light mode: ALL sidebar text same color - including all headers with higher specificity */
html[data-theme='light'] .sidebar,
html[data-theme='light'] .sidebar *,
html[data-theme='light'] .sidebar .brand-title,
html[data-theme='light'] .sidebar .brand-text,
html[data-theme='light'] .sidebar .chat-item,
html[data-theme='light'] .sidebar .chat-title-text,
html[data-theme='light'] .sidebar .agent-item,
html[data-theme='light'] .sidebar .agent-item > span,
html[data-theme='light'] .sidebar .agent-item > span:last-child,
html[data-theme='light'] .sidebar .agent-icon,
html[data-theme='light'] .sidebar .menu-btn,
html[data-theme='light'] .sidebar .icon-only,
html[data-theme='light'] .sidebar .agents-title,
html[data-theme='light'] .sidebar .time-category h3,
html[data-theme='light'] .sidebar .chat-history .chat-item,
html[data-theme='light'] .sidebar .chat-title,
html[data-theme='light'] .sidebar .history-title,
html[data-theme='light'] .sidebar .search-icon,
html[data-theme='light'] .sidebar h3,
html[data-theme='light'] .sidebar .time-count,
html[data-theme='light'] .sidebar .previous-threads,
html[data-theme='light'] .sidebar .last-week,
html[data-theme='light'] .sidebar .yesterday,
html[data-theme='light'] .sidebar .today {
  color: #333333 !important;
}

/* Light mode search input - lighter color */
html[data-theme='light'] .sidebar .sidebar-search input,
html[data-theme='light'] .sidebar input {
  color: #666666 !important;
}

html[data-theme='light'] .sidebar input::placeholder {
  color: #999999 !important;
  opacity: 1 !important;
}

/* ===== MAIN PAGE STYLES ===== */
.main-page {
  min-height: 100vh;
  background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 30%, #3b82f6 70%, #06b6d4 100%);
  color: white;
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
}

/* Header */
.main-header {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  padding: 12px 24px;
}

.header-content {
  display: flex;
  align-items: center;
  justify-content: space-between;
  max-width: 1400px;
  margin: 0 auto;
}

.brand-main {
  display: flex;
  align-items: center;
  gap: 8px;
}

.pulse-icon-main {
  width: 32px;
  height: 32px;
  background: linear-gradient(135deg, #60a5fa, #34d399);
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
}

.brand-text-main {
  font-size: 18px;
  font-weight: 700;
  color: white;
}

.header-nav {
  display: flex;
  align-items: center;
  gap: 32px;
}

.nav-link {
  color: white;
  text-decoration: none;
  font-weight: 500;
  opacity: 0.9;
  transition: opacity 0.2s;
}

.nav-link:hover {
  opacity: 1;
}

.header-right {
  display: flex;
  align-items: center;
  gap: 16px;
  font-size: 14px;
}

.enterprise-actions-header {
  display: flex;
  align-items: center;
  gap: 8px;
  color: white;
  font-weight: 500;
  cursor: pointer;
  padding: 8px 12px;
  border-radius: 6px;
  transition: background-color 0.2s;
  font-size: 14px;
}

.enterprise-actions-header:hover {
  background: rgba(255, 255, 255, 0.1);
}

.stock-info {
  color: #34d399;
  font-weight: 600;
}

.user-info {
  display: flex;
  align-items: center;
  gap: 12px;
}

.notification-badge {
  background: #ef4444;
  color: white;
  border-radius: 50%;
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: 600;
}

.user-avatar {
  width: 32px;
  height: 32px;
  background: #6b7280;
  border-radius: 50%;
}

/* Main Content */
.main-content {
  max-width: 1400px;
  margin: 0 auto;
  padding: 40px 24px;
}

.hero-section {
  text-align: center;
  margin-bottom: 60px;
  position: relative;
}

.greeting h1 {
  font-size: 32px;
  font-weight: 400;
  margin: 0 0 40px 0;
  color: white;
}

.search-section {
  margin-bottom: 32px;
}

.main-search-wrapper {
  display: flex;
  align-items: center;
  background: rgba(255, 255, 255, 0.95);
  border-radius: 28px;
  padding: 12px 20px;
  max-width: 700px;
  margin: 0 auto;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
  gap: 12px;
}

.main-search-icon {
  color: #3b82f6;
  display: flex;
  align-items: center;
  justify-content: center;
}

.main-search-input {
  flex: 1;
  border: none;
  outline: none;
  background: transparent;
  font-size: 16px;
  color: #1f2937;
}

.main-search-input::placeholder {
  color: #6b7280;
}

.main-mic-btn,
.main-send-btn {
  background: transparent;
  border: none;
  color: #6b7280;
  cursor: pointer;
  padding: 8px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background-color 0.2s;
}

.main-mic-btn:hover,
.main-send-btn:hover {
  background: rgba(0, 0, 0, 0.05);
}

.main-send-btn {
  color: #3b82f6;
}

/* Suggestions */
.suggestions-section {
  margin-bottom: 32px;
}

.suggestions-row {
  display: flex;
  align-items: flex-start;
  justify-content: center;
  gap: 16px;
  max-width: 900px;
  margin: 0 auto;
  flex-wrap: wrap;
}

.refresh-btn {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: white;
  padding: 12px;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
  flex-shrink: 0;
  order: -1;
  margin-bottom: 8px;
}

.refresh-btn:hover {
  background: rgba(255, 255, 255, 0.2);
  transform: rotate(180deg);
}

.suggestion-btn {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: white;
  padding: 12px 20px;
  border-radius: 24px;
  cursor: pointer;
  font-size: 14px;
  transition: all 0.2s;
  backdrop-filter: blur(10px);
  flex: 1;
  min-width: 200px;
  max-width: 280px;
  text-align: center;
  word-wrap: break-word;
  line-height: 1.4;
}

.suggestion-btn:hover {
  background: rgba(255, 255, 255, 0.2);
  transform: translateY(-2px);
}

.enterprise-actions {
  position: absolute;
  top: -20px;
  right: 0;
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  opacity: 0.8;
  color: white;
}

@media (max-width: 768px) {
  .suggestions-row {
    flex-direction: column;
    align-items: center;
    gap: 12px;
  }
  
  .refresh-btn {
    order: 0;
    margin-bottom: 16px;
  }
  
  .suggestion-btn {
    min-width: 250px;
    max-width: 300px;
  }
  
  .enterprise-actions {
    position: static;
    justify-content: center;
    margin-top: 24px;
  }
}

/* Featured Section */
.featured-section {
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: 40px;
  margin-bottom: 40px;
  background: rgba(255, 255, 255, 0.95);
  border-radius: 16px;
  padding: 32px;
  color: #1f2937;
}

.featured-story {
  position: relative;
}

.new-badge {
  background: #3b82f6;
  color: white;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 12px;
  font-weight: 600;
  position: absolute;
  top: 0;
  left: 0;
  z-index: 10;
}

.story-content {
  display: flex;
  gap: 20px;
  margin-top: 16px;
}

.story-image img {
  width: 300px;
  height: 200px;
  object-fit: cover;
  border-radius: 12px;
}

.story-text h3 {
  font-size: 18px;
  font-weight: 600;
  margin: 0 0 8px 0;
  color: #1f2937;
}

.story-text p {
  color: #6b7280;
  font-size: 14px;
  margin: 0;
}

.featured-label {
  background: #6b7280;
  color: white;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 12px;
  font-weight: 600;
  position: absolute;
  top: 0;
  right: 0;
}

.sidebar-content h4 {
  font-size: 16px;
  font-weight: 600;
  margin: 0 0 16px 0;
  color: #1f2937;
}

.todays-reminders {
  margin-bottom: 32px;
}

.reminder-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 0;
  border-bottom: 1px solid #e5e7eb;
}

.reminder-item:last-child {
  border-bottom: none;
}

.date-badge {
  background: #ef4444;
  color: white;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 12px;
  font-weight: 600;
}

.today-glance h5 {
  font-size: 14px;
  font-weight: 600;
  margin: 0 0 8px 0;
  color: #1f2937;
}

.location,
.workstation {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
  font-size: 14px;
  color: #6b7280;
}

.check-in-btn {
  background: #3b82f6;
  color: white;
  border: none;
  padding: 6px 12px;
  border-radius: 6px;
  font-size: 12px;
  cursor: pointer;
}

/* News Section */
.news-section {
  background: rgba(255, 255, 255, 0.95);
  border-radius: 16px;
  padding: 32px;
  color: #1f2937;
}

.news-tabs {
  display: flex;
  gap: 32px;
  margin-bottom: 24px;
  border-bottom: 1px solid #e5e7eb;
}

.tab {
  background: none;
  border: none;
  padding: 12px 0;
  font-size: 16px;
  font-weight: 500;
  color: #6b7280;
  cursor: pointer;
  border-bottom: 2px solid transparent;
}

.tab.active {
  color: #3b82f6;
  border-bottom-color: #3b82f6;
}

.news-search {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
}

.news-search-input {
  background: #f9fafb;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  padding: 8px 12px;
  width: 300px;
  outline: none;
}

.view-options {
  display: flex;
  gap: 8px;
}

.view-btn {
  background: #f9fafb;
  border: 1px solid #e5e7eb;
  border-radius: 6px;
  padding: 8px 12px;
  cursor: pointer;
}

.news-item {
  display: flex;
  gap: 16px;
  position: relative;
}

.news-content {
  display: flex;
  gap: 16px;
  align-items: flex-start;
}

.news-content img {
  width: 200px;
  height: 120px;
  object-fit: cover;
  border-radius: 8px;
}

.news-text h4 {
  font-size: 16px;
  font-weight: 600;
  margin: 0 0 8px 0;
  color: #1f2937;
}

.news-text p {
  color: #6b7280;
  font-size: 14px;
  margin: 0;
}

/* Responsive Design */
@media (max-width: 1024px) {
  .featured-section {
    grid-template-columns: 1fr;
  }
  
  .story-content {
    flex-direction: column;
  }
  
  .story-image img {
    width: 100%;
    height: auto;
  }
}

@media (max-width: 768px) {
  .header-nav {
    display: none;
  }
  
  .suggestions-row {
    flex-direction: column;
    align-items: stretch;
  }
  
  .suggestion-btn {
    text-align: center;
  }
  
  .main-content {
    padding: 20px 16px;
  }
}

/* Light mode search box - remove border */
html[data-theme='light'] .sidebar:not(.collapsed) .sidebar-search .search-inner,
html[data-theme='light'] .sidebar .sidebar-search .search-inner,
html[data-theme='light'] .sidebar .search-inner {
  background: transparent !important;
  border: none !important;
  padding: 8px 12px !important;
  border-radius: 8px !important;
  box-shadow: none !important;
}

html[data-theme='light'] .sidebar:not(.collapsed) .sidebar-search .search-inner:focus-within,
html[data-theme='light'] .sidebar .sidebar-search .search-inner:focus-within,
html[data-theme='light'] .sidebar .search-inner:focus-within {
  border: none !important;
  box-shadow: none !important;
}

/* Light mode font variations - same color, different weights/sizes */
html[data-theme='light'] .sidebar .brand-title {
  font-weight: 700 !important;
  font-size: 16px !important;
}

html[data-theme='light'] .sidebar .agents-title {
  font-weight: 600 !important;
  font-size: 11px !important;
  text-transform: uppercase !important;
  letter-spacing: 0.5px !important;
}

html[data-theme='light'] .sidebar .time-category h3,
html[data-theme='light'] .sidebar .history-title {
  font-weight: 600 !important;
  font-size: 11px !important;
  text-transform: uppercase !important;
  letter-spacing: 0.5px !important;
}

html[data-theme='light'] .sidebar .agent-item {
  font-weight: 400 !important;
  font-size: 13px !important;
}

html[data-theme='light'] .sidebar .agent-item > span:last-child {
  font-weight: 500 !important;
  font-size: 13px !important;
}

html[data-theme='light'] .sidebar .chat-title,
html[data-theme='light'] .sidebar .chat-title-text {
  font-weight: 400 !important;
  font-size: 13px !important;
}

html[data-theme='light'] .sidebar .back-text {
  font-weight: 500 !important;
  font-size: 13px !important;
}

html[data-theme='light'] .sidebar input::placeholder {
  color: #333333 !important;
  opacity: 0.7 !important;
}

html[data-theme='light'] .sidebar .agent-icon {
  color: #007acc !important;
}

/* FINAL: Highest specificity overrides for light mode to ensure visibility */
html[data-theme='light'] body .sidebar .brand svg,
html[data-theme='light'] body .sidebar .brand-left svg {
  background: linear-gradient(135deg, #007acc, #005299) !important;
  color: #ffffff !important;
  width: 32px !important;
  height: 32px !important;
  border-radius: 8px !important;
  box-shadow: 0 2px 8px rgba(0, 122, 204, 0.3) !important;
  padding: 6px !important;
}

html[data-theme='light'] body .sidebar .brand svg path,
html[data-theme='light'] body .sidebar .brand-left svg path {
  stroke: #ffffff !important;
  fill: none !important;
}

/* FINAL FIX: Force back icon visibility in light mode with highest specificity */
html[data-theme='light'] body .sidebar .back-btn svg,
html[data-theme='light'] body .sidebar .back-btn svg path,
html[data-theme='light'] body .sidebar .back-left .back-btn svg,
html[data-theme='light'] body .sidebar .back-left .back-btn svg path,
html[data-theme='light'] body .sidebar .second-row .back-btn svg,
html[data-theme='light'] body .sidebar .second-row .back-btn svg path,
html[data-theme='light'] .sidebar .back-btn svg,
html[data-theme='light'] .sidebar .back-btn svg path,
html[data-theme='light'] .sidebar .second-row svg,
html[data-theme='light'] .sidebar .second-row svg path {
  color: #333333 !important;
  stroke: #333333 !important;
  fill: none !important;
  stroke-width: 2 !important;
  opacity: 1 !important;
  visibility: visible !important;
}

/* Light mode back button text and button styling */
html[data-theme='light'] .sidebar .back-btn,
html[data-theme='light'] .sidebar .back-btn .back-text,
html[data-theme='light'] .sidebar .second-row .back-btn,
html[data-theme='light'] .sidebar .second-row .back-btn .back-text {
  color: #333333 !important;
  display: inline-flex !important;
  align-items: center !important;
  gap: 6px !important;
  background: transparent !important;
  border: none !important;
  padding: 6px 8px !important;
  border-radius: 6px !important;
  font-size: 13px !important;
  font-weight: 500 !important;
}

/* Light mode collapse/expand icon - same color with higher specificity */
html[data-theme='light'] .sidebar .collapse-toggle,
html[data-theme='light'] .sidebar .expand-btn,
html[data-theme='light'] .sidebar .icon-only,
html[data-theme='light'] .sidebar .top-right .collapse-toggle {
  color: #333333 !important;
  background: transparent !important;
  border: none !important;
}

/* Light-mode message styles */
[data-theme='light'] .messages { background: transparent; }
[data-theme='light'] .message.bot { background: transparent !important; border: none !important; box-shadow: none !important; color: var(--text) !important; padding:12px; border-radius:12px }
[data-theme='light'] .message.user {
  /* translucent OKLCH background with rgba fallback; only for light theme */
  background: rgba(2,6,23,0.04);
  background: oklch(0 0 0 / .08);
  color: var(--text);
  box-shadow: 0 8px 20px rgba(2,6,23,0.06);
  padding:12px;
  border-radius:14px;
}

/* Composer input with embedded icons */
.input-area { padding:18px; border-top: 1px solid rgba(2,6,23,0.04); background: transparent; display:flex; justify-content:center }
.input-wrapper { display:flex; align-items:center; gap:8px; background:#fff; border-radius:16px; padding:10px 14px; border:1px solid rgba(2,6,23,0.04); box-shadow: 0 8px 24px rgba(16,24,40,0.04); width: 720px; max-width: calc(100% - 48px); margin: 0 auto }
.input-wrapper input { flex:1; border:0; outline:none; padding:12px 12px; font-size:16px; background:transparent }
.input-wrapper .mic-btn, .input-wrapper .send-btn { background:transparent; border:0; width:36px; height:36px; display:inline-flex; align-items:center; justify-content:center; border-radius:50%; cursor:pointer; color:var(--sidebar-text); padding:6px }
.input-wrapper .send-btn { background: transparent; color:var(--sidebar-text); box-shadow:none }
.action-group { display:flex; gap:8px; align-items:center }
.input-wrapper .mic-btn:hover, .input-wrapper .send-btn:hover { background: rgba(2,6,23,0.03) }

/* Match the design in the reference images */

/* Sidebar background for dark mode */
.sidebar {
  background: linear-gradient(180deg, #021521, #052b3a) !important;
  box-shadow: inset -8px 0 30px rgba(0, 0, 0, 0.5) !important;
}

/* Chat window background for dark mode */
.chat-window {
  background: linear-gradient(180deg, #071928, #0a2631) !important;
  box-shadow: inset 0 -8px 30px rgba(0, 0, 0, 0.5) !important;
}

/* Sidebar background for light mode */
[data-theme='light'] .sidebar {
  background: linear-gradient(180deg, #f8fafc, #ffffff) !important;
  box-shadow: inset -8px 0 30px rgba(0, 0, 0, 0.1) !important;
}

/* Chat window background for light mode */
[data-theme='light'] .chat-window { background: linear-gradient(180deg,#fbfdff,#f4f7fb) !important; box-shadow: none !important }

/* Removed redundant Gemini-specific overrides. The unified message and composer
   styles earlier in this file provide the desired look (white bot cards, right-aligned
   user bubbles, centered composer). This section neutralizes any leftover
   avatar or left-action rules to avoid conflicts. */

/* Ensure messages stack and fill the content area so long replies are visible */
.chat-window .messages { display:flex; flex-direction:column; gap:20px; align-items:stretch }

/* Hide any leftover avatar elements and left-action toolkits */
.chat-window .messages .message.bot .avatar { display:none !important }
.input-wrapper .left-actions, .input-wrapper .left-actions .tool-btn { display:none !important }

/* Make sure the send button in the composer is icon-only and neutral */
.input-wrapper .send-btn { background: transparent !important; color: var(--accent) !important; box-shadow:none !important }

/* ensure messages column aligns with composer width */
.content-area { display:flex; justify-content:center }
.content-area .messages { max-width:760px; width:100%; box-sizing:border-box }

/* Dark-mode tweaks: keep light theme untouched. Use :not([data-theme='light']) to target
   dark appearance when no data-theme=light attribute is present. */
:not([data-theme='light']) .message.bot .message-body {
  color: #ffffff !important;
}

:not([data-theme='light']) .sidebar:not(.collapsed) {
  /* slightly darker sidebar surface than the chat window to create visual separation */
  background: linear-gradient(180deg,#041018,#071428) !important;
  border-right: 1px solid rgba(255,255,255,0.02) !important;
}

/* Align back and switch buttons */
.back-with-text {
  display: flex !important;
  align-items: center !important;
  justify-content: space-between !important;
  padding: 0 12px !important;
  gap: 10px !important;
}

.switch.inline {
  display: inline-flex !important;
  align-items: center !important;
  gap: 8px !important;
  border: 1px solid rgba(255, 255, 255, 0.5) !important;
  background: rgba(255, 255, 255, 0.1) !important;
  padding: 4px 8px !important;
  border-radius: 999px !important;
}

.switch.inline .sun {
  order: -1 !important;
  color: #f8e71c !important;
}

.switch.inline .moon {
  order: 1 !important;
  color: #4a90e2 !important;
}

/* Make switch visible in dark mode */
[data-theme='dark'] .switch.inline {
  border: 1px solid rgba(255, 255, 255, 0.8) !important;
  background: rgba(255, 255, 255, 0.2) !important;
}

.chat-window .header {
  padding: 18px 20px;
  position: sticky;
  top: 0;
  z-index: 5;
  background: transparent;
  color: var(--text);
}
.chat-window .header h2 {
  margin: 0;
  color: var(--text);
  font-size: 20px;
  font-weight: 700;
}

/* Chat window header title: use a clear UI font and theme-aware color.
   Light mode: dark navy blue. Dark mode: white. High-specificity rules
   to win over earlier duplicated selectors. */
html .chat-window .header h2 {
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif !important;
  font-weight: 750 !important;
  font-size: 22px !important;
  letter-spacing: 0.1px !important;
}

/* Light theme: slightly adjusted navy blue title */
html[data-theme='light'] .chat-window .header h2,
[data-theme='light'] .chat-window .header h2 {
  color: #05243A !important; /* adjusted dark navy */
}

/* Dark theme: white title */
html:not([data-theme='light']) .chat-window .header h2,
:not([data-theme='light']) .chat-window .header h2 {
  color: #ffffff !important;
}


/* Ensure chat header uses flex layout and space for impersonate controls */
.chat-window .header { display:flex; align-items:center; justify-content:space-between; padding:18px 20px; position:sticky; top:0; z-index:5; background:transparent; }

/* Impersonate input/button styling - visible in both themes */
.chat-window .header .impersonate input {
  padding:8px 10px;
  border-radius:8px;
  border:1px solid rgba(255,255,255,0.06);
  background: var(--card);
  color: var(--text);
  min-width:200px;
  max-width:360px;
}

.chat-window .header .impersonate button {
  padding:8px 12px;
  border-radius:8px;
  background: linear-gradient(90deg,var(--accent),#60a5fa);
  color:#ffffff;
  border:none;
  cursor:pointer;
}

/* Light theme overrides for impersonate control */
[data-theme='light'] .chat-window .header .impersonate input {
  border:1px solid rgba(2,6,23,0.06);
  background: #ffffff;
  color: var(--text);
}

[data-theme='light'] .chat-window .header .impersonate button {
  background: #0b3d91;
}

/* Ensure placeholder contrast */
.chat-window .header .impersonate input::placeholder { color: var(--muted); opacity:1 }

/* Make sure header small screens wrap nicely */
@media (max-width: 900px) {
  .chat-window .header { flex-direction:column; align-items:flex-start; gap:8px }
  .chat-window .header .impersonate input { width:100%; max-width:none }
}

/* Make only the chat history area scrollable and keep New Chat sticky at the bottom */
.sidebar { /* ensure sidebar overall is a column flex container */
  display: flex !important;
  flex-direction: column !important;
  overflow: visible !important; /* let inner areas scroll explicitly */
}

/* Wrapper for the lists: limit height to viewport space and allow internal scrolling */
.chat-list, .chat-history {
  overflow: visible !important;
  max-height: none !important;
  padding-right: 0 !important;
}

/* Sidebar bottom stays sticky at bottom of sidebar viewport */
.sidebar-bottom {
  position: sticky;
  bottom: 20px;
  z-index: 6;
  background: transparent;
}

/* Ensure chat title input is visible and editable */
.chat-title-input {
  width: 60%;
  padding: 10px 12px;
  border-radius: 12px;
  border: 0;
  background: var(--card);
  color: var(--text);
  font-weight: 700;
}

/* If header uses an input for title, ensure it blends in nicely */
.chat-window .header input.chat-title-input {
  background: transparent; /* use transparent so header background shows */
  border: 1px solid rgba(255,255,255,0.04);
}

/* Keep impersonate area anchored to right within header */
.chat-window .header { position: relative; }

/* Apply requested OKLCH backgrounds and subtle shadows */
.chat-window {
  /* main chat surface using the requested OKLCH color */
  /* fallback hex for older browsers */
  background: #f7fbff; /* fallback */
  background: oklch(.3908 .128 256 / 1);
  box-shadow: 0 10px 30px rgba(2,6,23,0.08), inset 0 1px 0 rgba(255,255,255,0.02);
  color: var(--text);
}

.sidebar:not(.collapsed) {
  /* left sidebar surface using a light neutral OKLCH as requested (L=0 is black; here using L=.84 for contrast)
     note: the user asked for oklch(from oklch(0 0 0 / 1) l c h / .84) â€” interpreted as L=.84 with same chroma/hue 0 */
  /* fallback hex for older browsers */
  background: #f6f7fb !important;
  background: oklch(.84 0 0 / 1) !important;
  border-right: 1px solid rgba(2,6,23,0.04) !important;
  box-shadow: inset -6px 0 12px rgba(2,6,23,0.02);
}
.chat-window .header .impersonate { margin-left: auto; }

/* Response text color: default for dark mode (white), explicitly black in light mode */
.message.bot, .message.bot .message-body {
  color: #ffffff;
}

[data-theme='light'] .message.bot, [data-theme='light'] .message.bot .message-body {
  color: #000000 !important;
}

/* small screens adjust */
@media (max-width: 900px) {
  .sidebar { width: 300px }
}

/* Adjusted max-height for smaller screens */
@media (max-height: 800px) {
  .chat-list, .chat-history { max-height: calc(100vh - 300px); }
}

/* Ensure left sidebar is pure white in light mode with standard text colors */
[data-theme='light'] .sidebar:not(.collapsed) {
  background: #ffffff !important;
  border-right: 1px solid #e0e0e0 !important;
  box-shadow: none !important;
}

/* Light-mode: set sidebar text color to standard dark gray */
[data-theme='light'] .sidebar,
[data-theme='light'] .sidebar .brand-title,
[data-theme='light'] .sidebar .chat-item,
[data-theme='light'] .sidebar .chat-title-text,
[data-theme='light'] .sidebar .agent-item,
[data-theme='light'] .sidebar .agent-item > span:last-child,
[data-theme='light'] .sidebar .agent-icon,
[data-theme='light'] .sidebar .menu-btn,
[data-theme='light'] .sidebar .icon-only,
[data-theme='light'] .sidebar .sidebar-search input {
  color: #333333 !important;
}

/* Search box styling for light mode - clean and simple */
[data-theme='light'] .sidebar:not(.collapsed) .sidebar-search .search-inner {
  background: #ffffff !important;
  border: 1px solid #cccccc !important;
  padding: 8px 12px !important;
  border-radius: 8px !important;
}

[data-theme='light'] .sidebar:not(.collapsed) .sidebar-search .search-inner .search-icon,
[data-theme='light'] .sidebar:not(.collapsed) .sidebar-search .search-inner input {
  color: #333333 !important;
}

[data-theme='light'] .sidebar:not(.collapsed) .sidebar-search .search-inner input::placeholder {
  color: #666666 !important;
  opacity: 1 !important;
}

/* Light mode message text and font styling to match original */
[data-theme='light'] .message.bot, 
[data-theme='light'] .message.bot .message-body {
  color: #333333 !important;
  font-size: 14px !important;
  line-height: 1.5 !important;
}

/* Light mode new chat button styling */
[data-theme='light'] .sidebar:not(.collapsed) .new-chat.bottom { 
  background: #007acc !important; 
  color: #ffffff !important; 
  padding: 12px 16px !important; 
  border-radius: 8px !important; 
  width: 100% !important; 
  box-shadow: none !important; 
  border: none !important;
  font-size: 14px !important;
  font-weight: 600 !important;
}

/* Light-mode (collapsed) â€” ensure icons are visible by using the requested OKLCH color */
[data-theme='light'] .sidebar.collapsed .icon-only,
[data-theme='light'] .sidebar.collapsed .collapse-toggle,
[data-theme='light'] .sidebar.collapsed .back-btn,
[data-theme='light'] .sidebar.collapsed .search-icon,
[data-theme='light'] .sidebar.collapsed .menu-btn,
[data-theme='light'] .sidebar.collapsed .chat-icon {
  color: #102033 !important;
  color: oklch(.3908 .128 256 / 1) !important;
}

/* FINAL override for light mode sidebar text to ensure it wins over other rules */
[data-theme='light'] .sidebar:not(.collapsed) .chat-item,
[data-theme='light'] .sidebar:not(.collapsed) .chat-title-text,
[data-theme='light'] .sidebar:not(.collapsed) .agent-item,
[data-theme='light'] .sidebar:not(.collapsed) .agent-item > span,
[data-theme='light'] .sidebar:not(.collapsed) .agent-icon,
[data-theme='light'] .sidebar:not(.collapsed) .menu-btn,
[data-theme='light'] .sidebar:not(.collapsed) .icon-only,
[data-theme='light'] .sidebar:not(.collapsed) .sidebar-search input {
  color: #102033 !important;
  color: oklch(.3908 .128 256 / 1) !important;
}

/* Make all sidebar text white in dark mode only; do not affect light mode */
:not([data-theme='light']) .sidebar,
:not([data-theme='light']) .sidebar .brand-title,
:not([data-theme='light']) .sidebar .chat-item,
:not([data-theme='light']) .sidebar .chat-title-text,
:not([data-theme='light']) .sidebar .agent-item,
:not([data-theme='light']) .sidebar .sidebar-search input,
:not([data-theme='light']) .sidebar .search-icon,
:not([data-theme='light']) .sidebar .menu-btn,
:not([data-theme='light']) .sidebar .icon-only {
  color: #ffffff !important;
}

/* Ensure placeholders and input text inside sidebar are readable in dark mode */
:not([data-theme='light']) .sidebar input,
:not([data-theme='light']) .sidebar input::placeholder {
  color: #ffffff !important;
  opacity: 1 !important;
}

/* Dark-mode only: make the sidebar search box a darker surface so white text is readable */
:not([data-theme='light']) .sidebar:not(.collapsed) .search-inner {
  background: rgba(255,255,255,0.03) !important; /* subtle dark surface */
  /* softer semi-transparent white border for dark mode */
  border: 1px solid rgba(255,255,255,0.18) !important;
}

/* Dark mode: make search box border clearly white for contrast */
:not([data-theme='light']) .sidebar:not(.collapsed) .search-inner {
  border-color: #ffffff !important;
}

:not([data-theme='light']) .sidebar:not(.collapsed) .sidebar-search input {
  color: #ffffff !important;
}

/* Ensure specific agent name span uses white in dark mode while keeping accent for highlighted part */
:not([data-theme='light']) .sidebar .agent-item { color: #ffffff !important; }
:not([data-theme='light']) .sidebar .agent-item > span:last-child { color: #ffffff !important; font-weight:500 }

/* Final: enforce pure white left sidebar background in light mode only.
   This is intentionally placed at the end and uses high-specificity selectors
   so it overrides earlier duplicate rules without touching dark mode. */
html[data-theme='light'] .sidebar,
html[data-theme='light'] .sidebar:not(.collapsed),
[data-theme='light'] .sidebar,
[data-theme='light'] .sidebar:not(.collapsed) {
  background: #ffffff !important;
  box-shadow: none !important;
  border-right: 1px solid rgba(2,6,23,0.06) !important;
}

/* Consolidated theme block (light/dark) - keeps key theme rules in one place
   to reduce duplication and make future edits simpler. This covers sidebar
   surface, search-inner defaults, and chat header title color. */


/* Light theme consolidated rules */
[data-theme='light'] {
  --sidebar-bg: linear-gradient(180deg,#ffffff,#f8fafc);
  --sidebar-text-color: #102033;
  --sidebar-border: rgba(2,6,23,0.06);
}

[data-theme='light'] .sidebar:not(.collapsed) {
  background: var(--sidebar-bg) !important;
  color: var(--sidebar-text-color) !important;
  border-right: 1px solid var(--sidebar-border) !important;
}

[data-theme='light'] .sidebar:not(.collapsed) .search-inner {
  background: transparent !important;
  border: 1px solid #102033 !important; /* fallback */
  color: #102033 !important;
}

[data-theme='light'] .chat-window .header h2 {
  color: #071428 !important; /* dark navy for titles in light mode */
}

/* Dark theme consolidated rules */
:not([data-theme='light']) .sidebar:not(.collapsed) {
  background: linear-gradient(180deg,#041018,#071428) !important;
  color: #ffffff !important;
  border-right: 1px solid rgba(255,255,255,0.02) !important;
}

:not([data-theme='light']) .sidebar:not(.collapsed) .search-inner {
  background: rgba(255,255,255,0.03) !important;
  border: 1px solid rgba(255,255,255,0.18) !important;
  color: #ffffff !important;
}

:not([data-theme='light']) .chat-window .header h2 {
  color: #ffffff !important;
}



